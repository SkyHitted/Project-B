using System;

class Program {
  public static Func<string, string> Then(Func<string, string> f, Func<string, string> g) {
    return x => g(f(x));
  }

  public static Func<string, Func<string, string>> Draw = sym => s => sym + s + sym;

  public static void Main() {
    Func<string, string> star = Draw("*");
    string s = star("star");
    Func<string, string> at = Draw("@");
    s = at("at");
    s = at(star("hello"));
        
    Func<string, string> fig1 = Then(star, at);
    string res = fig1("hi");
        
    Func<string, string> fig2 = Then(at, star);
    res = fig2("#");
    res = Then(at, at)("AT");

    res = Then(Draw("!"), Draw("?"))("what");
    res = Then(star, Then(Draw("2"),Draw("3")))("1");        
  }
}